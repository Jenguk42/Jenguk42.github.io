---
title: "Express crash course"

categories: 
- Web Development

tags:
- Chrome Extension
- 
toc: true
toc_sticky: true
---

> âœ’ Reference:[Express crash course by Traversy Media](https://youtu.be/fBNz5xF-Kx4) <br>
> [Express API Reference](https://expressjs.com/en/4x/api.html)

## What is Express?

A fast, unopinionated, and minimalist back-end framework for Node.js. It can be combined with client-side frameworks like React, Angular & Vue to build full stack applications.

You can build an API with Express so that it takes request from the front-end and serves back data in JSON format.

- Unopinionated: not a high level framework, does not require any fixed design, you have full control of handling the requrest to the server.

## Why use Express?

- Light, fast, free, and popular
- Makes building web apps with Node.js much easier: full control of request and response
- Used for both APIs with JSON data and back-end applications
- It's all JavaScript; great to use with client side frameworks

## Basic server syntax

```jsx
const express = require('express');

// Init express
const app = express();

// Create your endpoints/route handlers
app.get('/', function(req, res) {
    res.send('Hello World!');
})

// Listen on a port
app.listen(5000);
```

## Basic route handling

What can you do within your route?

- Fetch data from a database (MongoDB, MySQL, etc)
- Load pages
- Return JSON data
- Full access to request and response
  - `req` object represents the HTTP request properties for things like URL parameters, query strings, any data sent within the body, HTTP headers, etc.
  - `res` object represents the HTTP response, and you can use this object to send back JSON data, return template, redirect, etc.
- Parse any incoming data with the Body Parser
- Routs can be stored in separate files and exported, since Express has a router.

## Express middleware

A middleware is a stack of functions that executes whenever a request is made to a server. These functions have access to the request and response objects. Express has its own middleware, just like how 3rd party packages do. Middlewares can:

- Execute any code
- Make changes to the request/response objects
- End response cycle
- Call next middleware in the stack (with the next function)

## Using nodemon

Once the following code is added to `package.json`, you can run the file in developer mode via `npm run dev`. (`npm run start` is used for deployment)

```json
  "scripts": {
    "start": "node index",
    "dev": "nodemon index"
  }
```

## Creating a static server with Express

> Postman is used: an HTTP client to make requests to the server (get, put, post, delete, request, etc.)

```jsx
const express = require('express');
const app = express();

// Look for the environment variable, and set it to PORT
const PORT = process.env.PORT || 5000;
app.listen(PORT, () => console.log(`Server started on ${PORT}`));
```

`localhost:5000` will show `Cannot GET /`, which means that it cannot find a route handler for `/` (index page).

```jsx
const express = require('express');
const app = express();

// Create a route to go to a web page
app.get('/', (req, res) => {
    res.send('<h1>Hello World!</h1>');
});

const PORT = process.env.PORT || 5000;
app.listen(PORT, () => console.log(`Server started on ${PORT}`));
```

Instead of adding a single h1, you can add a whole HTML file.

```jsx
// Create a route to go to a web page
app.get('/', (req, res) => {
    res.sendFile(path.join(__dirname, 'public', 'index.html'));
});
```

However, this is not ideal since you have to put a route manually for every single page. Express has functionality to make a certain folder as the static folder.

```jsx
// Create a route to go to a web page by setting a static folder
// .use() is a method used to include a middleware.
app.use(express.static(path.join(__dirname, 'public')));
```

Any file within the public folder can be open without manually adding the route. i.e. `localhost:5000/about.html` will show `about.html` saved within the public folder. Instead of handling the content types and paths, you can just put the files in the public folder!

However, creating a static website is not what you will usually use Express for. You will mostly create JSON APIs to connect from a front-end or render templates where you can insert dynamic data.

